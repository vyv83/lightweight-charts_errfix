# –ë–ê–ì #26: –ê–≤—Ç–æ—Å–∫–µ–π–ª –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

> **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°–†–ï–î–ù–Ø–Ø  
> **Issue:** [#360](https://github.com/tradingview/lightweight-charts/issues/360)  
> **–°–≤—è–∑–∞–Ω–Ω—ã–µ Issues:** [#392](https://github.com/tradingview/lightweight-charts/issues/392), [#1393](https://github.com/tradingview/lightweight-charts/issues/1393)  
> **–í–µ—Ä—Å–∏–∏:** –í—Å–µ –≤–µ—Ä—Å–∏–∏  
> **–°—Ç–∞—Ç—É—Å:** üî¥ Open  
> **–î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 18 —è–Ω–≤–∞—Ä—è 2026

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ü–µ–Ω–æ–≤–æ–π –æ—Å–∏ (Price Axis) –≥—Ä–∞—Ñ–∏–∫ –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≤—Ç–æ—Å–∫–µ–π–ª–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç padding (–æ—Ç—Å—Ç—É–ø—ã) –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –∏ –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç —É—Ö–æ–¥–∏—Ç—å –≤ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é –∑–æ–Ω—É.

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞

1. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**: –¶–µ–Ω—ã –∞–∫—Ç–∏–≤–æ–≤ (–∞–∫—Ü–∏–∏, –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã) –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏
2. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ª–∏—à–Ω–µ–µ –ø—É—Å—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –Ω–∏–∂–µ –Ω—É–ª—è
3. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥**: –¢—Ä–µ–π–¥–∏–Ω–≥-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
4. **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–ø–∏—Å–µ–π**: –ú–µ—Ç–∫–∏ –Ω–∞ –æ—Å–∏ Y –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è

```javascript
// –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ
const data = [
  { time: '2024-01-01', value: 5.2 },
  { time: '2024-01-02', value: 4.8 },
  { time: '2024-01-03', value: 5.5 },
  { time: '2024-01-04', value: 3.2 },  // –ù–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±–ª–∏–∑–∫–æ –∫ 0
  { time: '2024-01-05', value: 6.1 },
];

// –ü—Ä–∏ –∞–≤—Ç–æ—Å–∫–µ–π–ª–µ –æ—Å—å Y –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç -1 –¥–æ 7
// –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –æ—Ç 0 –¥–æ 7
```

### –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–±–ª–µ–º—ã

- 100% –ø—Ä–∏ –¥–∞–Ω–Ω—ã—Ö —Å –º–∞–ª—ã–º–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –±–ª–∏–∑–∫–∏–º–∏ –∫ 0
- –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è low-cap –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (SHIB, PEPE –∏ —Ç.–¥.)
- –ü—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –æ–∫–æ–ª–æ –Ω—É–ª—è

---

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: autoscaleInfoProvider —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º 0

**–û—Ü–µ–Ω–∫–∞: 9/10** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–û–ï

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `autoscaleInfoProvider` –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è 0 –Ω–∞ —Ü–µ–Ω–æ–≤–æ–π –æ—Å–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ API
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ—Ä–∏–∏
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –∫–∞–∂–¥—É—é —Å–µ—Ä–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–æ–∂–µ—Ç —Å–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)

```javascript
const series = chart.addLineSeries({
  autoscaleInfoProvider: (original) => {
    const res = original();
    if (res !== null && res.priceRange) {
      // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º—É–º –Ω—É–ª—ë–º
      res.priceRange.minValue = Math.max(0, res.priceRange.minValue);
    }
    return res;
  },
});
```

---

### –†–µ—à–µ–Ω–∏–µ 2: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω —á–µ—Ä–µ–∑ priceScale options

**–û—Ü–µ–Ω–∫–∞: 6/10**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü —Ü–µ–Ω–æ–≤–æ–π —à–∫–∞–ª—ã —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–∏–π –Ω–∞ –æ–¥–Ω–æ–π —à–∫–∞–ª–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –û—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ—Å–∫–µ–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—Ä–∞–Ω–µ–µ
- –ù–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö

```javascript
// –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Å–∫–µ–π–ª –∏ –∑–∞–¥–∞—ë–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
chart.priceScale('right').applyOptions({
  autoScale: false,
  scaleMargins: {
    top: 0.1,
    bottom: 0,  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É
  },
});

// –í—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º visible range
chart.priceScale('right').applyOptions({
  entireTextOnly: false,
});
```

---

### –†–µ—à–µ–Ω–∏–µ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

**–û—Ü–µ–Ω–∫–∞: 7/10**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è/–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –î–∞–Ω–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∞
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ò–∑–º–µ–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ù–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É padding –ø—Ä–∏ –∞–≤—Ç–æ—Å–∫–µ–π–ª–µ
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

```javascript
// –§—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
function sanitizeData(data) {
  return data.map(item => ({
    ...item,
    value: Math.max(0, item.value),
    // –î–ª—è OHLC –¥–∞–Ω–Ω—ã—Ö
    open: item.open !== undefined ? Math.max(0, item.open) : undefined,
    high: item.high !== undefined ? Math.max(0, item.high) : undefined,
    low: item.low !== undefined ? Math.max(0, item.low) : undefined,
    close: item.close !== undefined ? Math.max(0, item.close) : undefined,
  }));
}

series.setData(sanitizeData(rawData));
```

---

### –†–µ—à–µ–Ω–∏–µ 4: scaleMargins —Å –Ω—É–ª–µ–≤—ã–º –Ω–∏–∂–Ω–∏–º –æ—Ç—Å—Ç—É–ø–æ–º

**–û—Ü–µ–Ω–∫–∞: 5/10**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –Ω–∏–∂–Ω–µ–≥–æ margin –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –£–º–µ–Ω—å—à–∞–µ—Ç –≤–∏–¥–∏–º—É—é –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –∫—Ä–∞—é
- –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∞–µ—Ç—Å—è –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é

```javascript
series.applyOptions({
  priceScaleId: 'right',
  scaleMargins: {
    top: 0.1,    // 10% –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É
    bottom: 0,   // 0% –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É
  },
});
```

---

### –†–µ—à–µ–Ω–∏–µ 5: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (autoscaleInfoProvider + scaleMargins)

**–û—Ü–µ–Ω–∫–∞: 10/10** ‚≠ê‚≠ê –õ–£–ß–®–ï–ï –†–ï–®–ï–ù–ò–ï

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ—á–µ—Ç–∞–Ω–∏–µ autoscaleInfoProvider –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∏–Ω–∏–º—É–º–∞ –∏ scaleMargins –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ–±–æ–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ü–æ–ª–Ω—ã–π –∫–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```javascript
import { createChart } from 'lightweight-charts';

/**
 * –°–æ–∑–¥–∞—ë—Ç autoscaleInfoProvider —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
 * @param {number} minFloor - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
 * @param {number} padding - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.1)
 * @returns {Function} Provider —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è autoscaleInfoProvider
 */
function createNonNegativeScaleProvider(minFloor = 0, padding = 0.1) {
  return (original) => {
    const result = original();
    
    if (result !== null && result.priceRange) {
      const { minValue, maxValue } = result.priceRange;
      
      // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º—É–º
      const clampedMin = Math.max(minFloor, minValue);
      
      // –î–æ–±–∞–≤–ª—è–µ–º padding —Å–≤–µ—Ä—Ö—É –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
      const range = maxValue - clampedMin;
      const paddedMax = maxValue + (range * padding);
      
      result.priceRange = {
        minValue: clampedMin,
        maxValue: paddedMax,
      };
    }
    
    return result;
  };
}

// –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
const chart = createChart(document.getElementById('chart'), {
  width: 800,
  height: 400,
  layout: {
    background: { type: 'solid', color: '#1E222D' },
    textColor: '#DDD',
  },
  grid: {
    vertLines: { color: '#2B2B43' },
    horzLines: { color: '#2B2B43' },
  },
  rightPriceScale: {
    borderVisible: true,
    borderColor: '#2B2B43',
    // –Ø–≤–Ω–æ –≤–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Å–∫–µ–π–ª
    autoScale: true,
  },
});

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
const lineSeries = chart.addLineSeries({
  color: '#2962FF',
  lineWidth: 2,
  // –ö–ª—é—á–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ - autoscaleInfoProvider
  autoscaleInfoProvider: createNonNegativeScaleProvider(0, 0.1),
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  priceScaleId: 'right',
});

// –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
const data = [
  { time: '2024-01-01', value: 5.2 },
  { time: '2024-01-02', value: 4.8 },
  { time: '2024-01-03', value: 2.1 },
  { time: '2024-01-04', value: 0.5 },  // –ë–ª–∏–∑–∫–æ –∫ –Ω—É–ª—é, –Ω–æ –Ω–µ –Ω–∏–∂–µ!
  { time: '2024-01-05', value: 3.7 },
  { time: '2024-01-06', value: 6.3 },
];

lineSeries.setData(data);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ–Ω–∫–∞ –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
chart.timeScale().fitContent();
```

### –ü—Ä–∏–º–µ—Ä –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–∏–π

```javascript
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö–µ–ª–ø–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–∏–π –±–µ–∑ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
function addNonNegativeSeries(chart, type, options = {}) {
  const seriesOptions = {
    ...options,
    autoscaleInfoProvider: createNonNegativeScaleProvider(0, 0.1),
  };
  
  switch (type) {
    case 'line':
      return chart.addLineSeries(seriesOptions);
    case 'area':
      return chart.addAreaSeries(seriesOptions);
    case 'candlestick':
      return chart.addCandlestickSeries(seriesOptions);
    case 'bar':
      return chart.addBarSeries(seriesOptions);
    case 'histogram':
      return chart.addHistogramSeries(seriesOptions);
    default:
      return chart.addLineSeries(seriesOptions);
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const priceSeries = addNonNegativeSeries(chart, 'candlestick', {
  upColor: '#26a69a',
  downColor: '#ef5350',
  wickUpColor: '#26a69a',
  wickDownColor: '#ef5350',
});

const volumeSeries = addNonNegativeSeries(chart, 'histogram', {
  color: '#26a69a',
  priceFormat: { type: 'volume' },
  priceScaleId: 'volume',
});
```

### React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```tsx
import React, { useEffect, useRef } from 'react';
import { createChart, IChartApi, ISeriesApi } from 'lightweight-charts';

interface NonNegativeChartProps {
  data: { time: string; value: number }[];
  width?: number;
  height?: number;
  minFloor?: number;
}

export const NonNegativeChart: React.FC<NonNegativeChartProps> = ({
  data,
  width = 600,
  height = 400,
  minFloor = 0,
}) => {
  const chartContainerRef = useRef<HTMLDivElement>(null);
  const chartRef = useRef<IChartApi | null>(null);
  const seriesRef = useRef<ISeriesApi<'Line'> | null>(null);

  useEffect(() => {
    if (!chartContainerRef.current) return;

    // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
    chartRef.current = createChart(chartContainerRef.current, {
      width,
      height,
      layout: {
        background: { type: 'solid', color: '#1E222D' },
        textColor: '#DDD',
      },
    });

    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–∏–∏ —Å autoscaleInfoProvider
    seriesRef.current = chartRef.current.addLineSeries({
      color: '#2962FF',
      autoscaleInfoProvider: (original) => {
        const result = original();
        if (result !== null && result.priceRange) {
          result.priceRange.minValue = Math.max(
            minFloor,
            result.priceRange.minValue
          );
        }
        return result;
      },
    });

    return () => {
      chartRef.current?.remove();
    };
  }, [width, height, minFloor]);

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  useEffect(() => {
    if (seriesRef.current && data) {
      seriesRef.current.setData(data);
      chartRef.current?.timeScale().fitContent();
    }
  }, [data]);

  return <div ref={chartContainerRef} />;
};
```

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –ö—Ä–∏—Ç–µ—Ä–∏–π | autoscaleInfoProvider | –§–∏–∫—Å. –¥–∏–∞–ø–∞–∑–æ–Ω | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | scaleMargins | –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π |
|----------|:--------------------:|:--------------:|:----------------:|:------------:|:---------------:|
| **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | ‚úÖ –ü–æ–ª–Ω–∞—è | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è | ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | ‚úÖ –ü–æ–ª–Ω–∞—è |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞** | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **–ì–∏–±–∫–æ—Å—Ç—å** | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚ùå –ù–∏–∑–∫–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚ùå –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ API** | ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è | ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è | - | ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è | ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |
| **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–û—Ü–µ–Ω–∫–∞** | **9/10** | **6/10** | **7/10** | **5/10** | **10/10** |

---

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

```javascript
// –î–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
function updateScaleConstraints(series, allowNegative) {
  series.applyOptions({
    autoscaleInfoProvider: allowNegative
      ? undefined  // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
      : createNonNegativeScaleProvider(0),
  });
}
```

### 2. –†–∞–∑–Ω—ã–µ –º–∏–Ω–∏–º—É–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

```javascript
// –î–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (0-100%)
const percentageSeries = chart.addLineSeries({
  autoscaleInfoProvider: createNonNegativeScaleProvider(0, 0.05),
});

// –î–ª—è –æ–±—ä—ë–º–æ–≤ (–≤—Å–µ–≥–¥–∞ >= 0)
const volumeSeries = chart.addHistogramSeries({
  autoscaleInfoProvider: createNonNegativeScaleProvider(0, 0.2),
});

// –î–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ç–∏–ø–∞ RSI (0-100)
const rsiSeries = chart.addLineSeries({
  autoscaleInfoProvider: (original) => {
    return {
      priceRange: { minValue: 0, maxValue: 100 },
    };
  },
});
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
function safeAutoscaleProvider(minFloor = 0) {
  return (original) => {
    try {
      const result = original();
      if (result?.priceRange) {
        result.priceRange.minValue = Math.max(minFloor, result.priceRange.minValue);
      }
      return result;
    } catch (error) {
      console.warn('Autoscale provider error:', error);
      return null;  // Fallback –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é
    }
  };
}
```

---

## üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏

1. **GitHub Issue #360** - [Negative values on Price Axis](https://github.com/tradingview/lightweight-charts/issues/360)
2. **GitHub Issue #392** - [Add ability to override series' autoscale range](https://github.com/tradingview/lightweight-charts/issues/392)
3. **GitHub Issue #1393** - [Option to limit price scale range](https://github.com/tradingview/lightweight-charts/issues/1393)
4. **Lightweight Charts Documentation** - [Series Options](https://tradingview.github.io/lightweight-charts/docs/api/interfaces/SeriesOptionsCommon#autoscaleinfoprovider)
5. **Stack Overflow** - [Exclude Series from Default/Auto Visible Range](https://stackoverflow.com/questions/75287789)
6. **GitHub Discussion** - [Price scale customization](https://github.com/tradingview/lightweight-charts/discussions)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- `autoscaleInfoProvider` –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 3.8
- –í –≤–µ—Ä—Å–∏–∏ 5.x API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
- –†–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–µ—Ä–∏–π (Line, Area, Candlestick, Bar, Histogram)
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–∏–π –Ω–∞ –æ–¥–Ω–æ–π price scale, autoscaleInfoProvider –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Ä–∏–∏

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 18 —è–Ω–≤–∞—Ä—è 2026*  
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 18 —è–Ω–≤–∞—Ä—è 2026*

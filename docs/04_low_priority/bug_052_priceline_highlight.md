# –ë–ê–ì #52: –ù–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è —Ü–µ–Ω–∞ –Ω–∞ price line

> **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ù–ò–ó–ö–ê–Ø  
> **Issue:** [#273](https://github.com/tradingview/lightweight-charts/issues/273)  
> **–í–µ—Ä—Å–∏–∏:** –í—Å–µ –≤–µ—Ä—Å–∏–∏, –≤–∫–ª—é—á–∞—è v5.x  
> **–°—Ç–∞—Ç—É—Å:** üî¥ Open  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2019

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ **–Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –Ω–∞ price line** (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é —É—Ä–æ–≤–Ω—è —Ü–µ–Ω—ã) **–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** ‚Äî –ª–∏–Ω–∏—è –Ω–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è, –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–æ–ª—â–∏–Ω—É –∏–ª–∏ —Ü–≤–µ—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–∂–∏–¥–∞—é—Ç, —á—Ç–æ –ø—Ä–∏ hover –Ω–∞–¥ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –±—É–¥–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π feedback.

### –î–µ—Ç–∞–ª–∏

1. **–°–∏–º–ø—Ç–æ–º—ã:**
   - Price line –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ hover
   - –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
   - –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω

2. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—â–∏–Ω—ã –∏–ª–∏ —Ü–≤–µ—Ç–∞ –ª–∏–Ω–∏–∏ –ø—Ä–∏ hover
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ (pointer)
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –º–µ—Ç–∫–∏ –Ω–∞ –æ—Å–∏

3. **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
   - UX: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –ª–∏–Ω–∏—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
   - Accessibility: –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
import { createChart } from 'lightweight-charts';

const chart = createChart(container);
const series = chart.addLineSeries();
series.setData(data);

// –°–æ–∑–¥–∞—ë–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π price line
const priceLine = series.createPriceLine({
  price: 100,
  title: 'Support Level',
  color: '#2962FF',
  lineWidth: 2,
});

// –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏:
// ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
// ‚ùå –ö—É—Ä—Å–æ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è default
// ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –º–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã

```
–û–∂–∏–¥–∞–µ–º–æ–µ –ø—Ä–∏ hover:              –†–µ–∞–ª—å–Ω–æ–µ:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        ‚îÇ        ‚îÇ                        ‚îÇ
‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ‚ñ∏  ‚îÇ hover  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ ‚Üê –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ (—Ç–æ–ª—â–µ + pointer)      ‚îÇ        ‚îÇ                        ‚îÇ
‚îÇ                        ‚îÇ        ‚îÇ                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ hover —á–µ—Ä–µ–∑ subscribeCrosshairMove (‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ)

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5) - –†–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ

```typescript
import { createChart, IChartApi, ISeriesApi, IPriceLine, LineStyle } from 'lightweight-charts';

interface HoverablePriceLine {
  priceLine: IPriceLine;
  price: number;
  normalWidth: number;
  hoverWidth: number;
  normalColor: string;
  hoverColor: string;
}

class PriceLineHoverManager {
  private _chart: IChartApi;
  private _series: ISeriesApi<any>;
  private _container: HTMLElement;
  private _lines: HoverablePriceLine[] = [];
  private _hoveredLine: HoverablePriceLine | null = null;
  private _hoverThreshold = 5; // –ø–∏–∫—Å–µ–ª–µ–π
  
  constructor(chart: IChartApi, series: ISeriesApi<any>, container: HTMLElement) {
    this._chart = chart;
    this._series = series;
    this._container = container;
    
    this._setupHoverTracking();
  }
  
  addPriceLine(
    price: number,
    title: string,
    color: string,
    options?: {
      hoverColor?: string;
      normalWidth?: number;
      hoverWidth?: number;
    }
  ): IPriceLine {
    const normalWidth = options?.normalWidth ?? 1;
    const hoverWidth = options?.hoverWidth ?? 3;
    const hoverColor = options?.hoverColor ?? this._lightenColor(color, 30);
    
    const priceLine = this._series.createPriceLine({
      price,
      title,
      color,
      lineWidth: normalWidth,
      lineStyle: LineStyle.Solid,
      axisLabelVisible: true,
    });
    
    this._lines.push({
      priceLine,
      price,
      normalWidth,
      hoverWidth,
      normalColor: color,
      hoverColor,
    });
    
    return priceLine;
  }
  
  private _setupHoverTracking(): void {
    this._chart.subscribeCrosshairMove((param) => {
      if (!param.point) {
        this._unhoverAll();
        return;
      }
      
      const { y } = param.point;
      let foundHover = false;
      
      for (const line of this._lines) {
        const lineY = this._series.priceToCoordinate(line.price);
        
        if (lineY !== null && Math.abs(y - lineY) <= this._hoverThreshold) {
          if (this._hoveredLine !== line) {
            this._unhoverAll();
            this._setHovered(line);
          }
          foundHover = true;
          break;
        }
      }
      
      if (!foundHover && this._hoveredLine) {
        this._unhoverAll();
      }
    });
    
    // –¢–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º mousemove –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞
    this._container.addEventListener('mousemove', (e) => {
      const rect = this._container.getBoundingClientRect();
      const y = e.clientY - rect.top;
      
      let isOverLine = false;
      
      for (const line of this._lines) {
        const lineY = this._series.priceToCoordinate(line.price);
        if (lineY !== null && Math.abs(y - lineY) <= this._hoverThreshold) {
          isOverLine = true;
          break;
        }
      }
      
      this._container.style.cursor = isOverLine ? 'pointer' : 'default';
    });
  }
  
  private _setHovered(line: HoverablePriceLine): void {
    this._hoveredLine = line;
    
    line.priceLine.applyOptions({
      lineWidth: line.hoverWidth,
      color: line.hoverColor,
    });
  }
  
  private _unhoverAll(): void {
    if (this._hoveredLine) {
      this._hoveredLine.priceLine.applyOptions({
        lineWidth: this._hoveredLine.normalWidth,
        color: this._hoveredLine.normalColor,
      });
      this._hoveredLine = null;
    }
    this._container.style.cursor = 'default';
  }
  
  private _lightenColor(hex: string, percent: number): string {
    const num = parseInt(hex.replace('#', ''), 16);
    const amt = Math.round(2.55 * percent);
    const R = Math.min(255, (num >> 16) + amt);
    const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);
    const B = Math.min(255, (num & 0x0000FF) + amt);
    return `#${(0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1)}`;
  }
  
  removePriceLine(priceLine: IPriceLine): void {
    const index = this._lines.findIndex(l => l.priceLine === priceLine);
    if (index !== -1) {
      this._series.removePriceLine(priceLine);
      this._lines.splice(index, 1);
    }
  }
  
  destroy(): void {
    this._lines = [];
    this._hoveredLine = null;
  }
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const container = document.getElementById('chart')!;
const chart = createChart(container);
const series = chart.addLineSeries();
series.setData(data);

const hoverManager = new PriceLineHoverManager(chart, series, container);

// –î–æ–±–∞–≤–ª—è–µ–º price line —Å hover —ç—Ñ—Ñ–µ–∫—Ç–æ–º
const supportLine = hoverManager.addPriceLine(95, 'Support', '#26A69A', {
  hoverWidth: 3,
});

const resistanceLine = hoverManager.addPriceLine(105, 'Resistance', '#EF5350', {
  hoverWidth: 3,
});
```

**–ü–ª—é—Å—ã:**
- –í–∏–∑—É–∞–ª—å–Ω—ã–π feedback –ø—Ä–∏ hover
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ –∏ —Ç–æ–ª—â–∏–Ω—ã

**–ú–∏–Ω—É—Å—ã:**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –ù–µ–±–æ–ª—å—à–æ–π overhead –Ω–∞ crosshairMove

---

### –†–µ—à–µ–Ω–∏–µ 2: Custom primitive —Å hover state

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å

```typescript
import { 
  createChart, 
  ISeriesPrimitive,
  SeriesAttachedParameter,
  Time,
  MouseEventParams,
} from 'lightweight-charts';

interface HoverablePriceLineOptions {
  price: number;
  title?: string;
  color?: string;
  hoverColor?: string;
  lineWidth?: number;
  hoverLineWidth?: number;
}

class HoverablePriceLinePrimitive implements ISeriesPrimitive<Time> {
  private _options: Required<HoverablePriceLineOptions>;
  private _series: SeriesAttachedParameter<Time> | null = null;
  private _isHovered = false;
  private _hoverThreshold = 5;
  
  constructor(options: HoverablePriceLineOptions) {
    this._options = {
      price: options.price,
      title: options.title ?? '',
      color: options.color ?? '#2962FF',
      hoverColor: options.hoverColor ?? '#5B8DEF',
      lineWidth: options.lineWidth ?? 1,
      hoverLineWidth: options.hoverLineWidth ?? 3,
    };
  }
  
  attached(param: SeriesAttachedParameter<Time>): void {
    this._series = param;
    
    // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏
    param.chart.subscribeCrosshairMove((event) => {
      this._handleMouseMove(event);
    });
  }
  
  detached(): void {
    this._series = null;
  }
  
  private _handleMouseMove(event: MouseEventParams): void {
    if (!this._series || !event.point) {
      if (this._isHovered) {
        this._isHovered = false;
        this._series?.requestUpdate();
      }
      return;
    }
    
    const lineY = this._series.priceToCoordinate(this._options.price);
    if (lineY === null) return;
    
    const wasHovered = this._isHovered;
    this._isHovered = Math.abs(event.point.y - lineY) <= this._hoverThreshold;
    
    if (wasHovered !== this._isHovered) {
      this._series.requestUpdate();
    }
  }
  
  paneViews() {
    return [{
      renderer: () => ({
        draw: (target: any) => {
          if (!this._series) return;
          
          const ctx = target.context;
          const y = this._series.priceToCoordinate(this._options.price);
          
          if (y === null) return;
          
          const width = target.mediaSize.width;
          const { color, hoverColor, lineWidth, hoverLineWidth } = this._options;
          
          ctx.save();
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º hover —Å—Ç–∏–ª–∏
          ctx.strokeStyle = this._isHovered ? hoverColor : color;
          ctx.lineWidth = this._isHovered ? hoverLineWidth : lineWidth;
          
          // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(width, y);
          ctx.stroke();
          
          // –†–∏—Å—É–µ–º –º–µ—Ç–∫—É –ø—Ä–∏ hover
          if (this._isHovered && this._options.title) {
            const text = `${this._options.title}: ${this._options.price.toFixed(2)}`;
            ctx.font = '12px Arial';
            ctx.fillStyle = hoverColor;
            ctx.textAlign = 'left';
            ctx.fillText(text, 10, y - 5);
          }
          
          ctx.restore();
        },
      }),
    }];
  }
  
  priceAxisViews() {
    return [{
      coordinate: () => this._series?.priceToCoordinate(this._options.price) ?? 0,
      text: () => this._options.price.toFixed(2),
      textColor: () => '#FFFFFF',
      backColor: () => this._isHovered ? this._options.hoverColor : this._options.color,
      visible: () => true,
    }];
  }
  
  hitTest(x: number, y: number): { cursorStyle?: string } | null {
    if (!this._series) return null;
    
    const lineY = this._series.priceToCoordinate(this._options.price);
    if (lineY === null) return null;
    
    if (Math.abs(y - lineY) <= this._hoverThreshold) {
      return { cursorStyle: 'pointer' };
    }
    
    return null;
  }
  
  setPrice(price: number): void {
    this._options.price = price;
    this._series?.requestUpdate();
  }
  
  isHovered(): boolean {
    return this._isHovered;
  }
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const chart = createChart(container);
const series = chart.addLineSeries();
series.setData(data);

const hoverableLine = new HoverablePriceLinePrimitive({
  price: 100,
  title: 'Support',
  color: '#26A69A',
  hoverColor: '#4DB6AC',
  lineWidth: 1,
  hoverLineWidth: 3,
});

series.attachPrimitive(hoverableLine);
```

**–ü–ª—é—Å—ã:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º
- hitTest –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞
- –ï–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –≤—Å–µ–π –ª–æ–≥–∏–∫–∏

**–ú–∏–Ω—É—Å—ã:**
- –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
- –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è Primitives API

---

### –†–µ—à–µ–Ω–∏–µ 3: CSS transitions —Å HTML overlay

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê (3/5) - –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```typescript
import { createChart, IChartApi, ISeriesApi } from 'lightweight-charts';

class CSSHoverPriceLine {
  private _chart: IChartApi;
  private _series: ISeriesApi<any>;
  private _container: HTMLElement;
  private _lineElement: HTMLElement;
  private _price: number;
  private _isHovered = false;
  
  constructor(
    chart: IChartApi,
    series: ISeriesApi<any>,
    container: HTMLElement,
    price: number,
    title: string,
    color: string
  ) {
    this._chart = chart;
    this._series = series;
    this._container = container;
    this._price = price;
    
    // –°–æ–∑–¥–∞—ë–º HTML —ç–ª–µ–º–µ–Ω—Ç –ª–∏–Ω–∏–∏
    this._lineElement = document.createElement('div');
    this._lineElement.style.cssText = `
      position: absolute;
      left: 0;
      right: 60px;
      height: 2px;
      background: ${color};
      cursor: pointer;
      transition: height 0.15s ease, box-shadow 0.15s ease;
      z-index: 5;
    `;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É
    const label = document.createElement('span');
    label.style.cssText = `
      position: absolute;
      right: -60px;
      top: 50%;
      transform: translateY(-50%);
      background: ${color};
      color: white;
      padding: 2px 6px;
      font-size: 11px;
      border-radius: 2px;
      transition: transform 0.15s ease;
    `;
    label.textContent = `${title}: ${price.toFixed(2)}`;
    this._lineElement.appendChild(label);
    
    // Hover —ç—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ CSS
    this._lineElement.addEventListener('mouseenter', () => {
      this._lineElement.style.height = '4px';
      this._lineElement.style.boxShadow = `0 0 8px ${color}`;
      label.style.transform = 'translateY(-50%) scale(1.1)';
      this._isHovered = true;
    });
    
    this._lineElement.addEventListener('mouseleave', () => {
      this._lineElement.style.height = '2px';
      this._lineElement.style.boxShadow = 'none';
      label.style.transform = 'translateY(-50%) scale(1)';
      this._isHovered = false;
    });
    
    this._container.appendChild(this._lineElement);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
    this._updatePosition();
    this._chart.timeScale().subscribeVisibleLogicalRangeChange(() => this._updatePosition());
    this._chart.subscribeCrosshairMove(() => this._updatePosition());
  }
  
  private _updatePosition(): void {
    const y = this._series.priceToCoordinate(this._price);
    
    if (y === null) {
      this._lineElement.style.display = 'none';
    } else {
      this._lineElement.style.display = 'block';
      this._lineElement.style.top = `${y - 1}px`;
    }
  }
  
  onClick(callback: () => void): void {
    this._lineElement.addEventListener('click', callback);
  }
  
  remove(): void {
    this._lineElement.remove();
  }
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const container = document.getElementById('chart')!;
container.style.position = 'relative';

const chart = createChart(container);
const series = chart.addLineSeries();
series.setData(data);

const hoverLine = new CSSHoverPriceLine(
  chart,
  series,
  container,
  100,
  'Support',
  '#26A69A'
);

hoverLine.onClick(() => {
  console.log('Price line clicked!');
});
```

**–ü–ª—é—Å—ã:**
- CSS transitions –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –õ–µ–≥–∫–æ —Å—Ç–∏–ª–∏–∑–æ–≤–∞—Ç—å

**–ú–∏–Ω—É—Å—ã:**
- HTML overlay –ø–æ–≤–µ—Ä—Ö canvas
- –ù—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–†–µ—à–µ–Ω–∏–µ 1** —Å PriceLineHoverManager:

```typescript
// –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä
chart.subscribeCrosshairMove((param) => {
  if (!param.point) return;
  
  const lineY = series.priceToCoordinate(priceLineValue);
  const isHovered = lineY !== null && Math.abs(param.point.y - lineY) < 5;
  
  priceLine.applyOptions({
    lineWidth: isHovered ? 3 : 1,
    color: isHovered ? '#5B8DEF' : '#2962FF',
  });
  
  container.style.cursor = isHovered ? 'pointer' : 'default';
});
```

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ü–ª–∞–≤–Ω–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|----------|-------------------|-----------|--------------|
| **#1 CrosshairMove** | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ |
| **#2 Custom primitive** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | –°–ª–æ–∂–Ω—ã–µ –∫–µ–π—Å—ã |
| **#3 CSS overlay** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø |

## üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏

- [GitHub Issue #273](https://github.com/tradingview/lightweight-charts/issues/273) - Price line hover highlight
- [Price Lines API](https://tradingview.github.io/lightweight-charts/docs/api/interfaces/IPriceLine)
- [Crosshair Move Event](https://tradingview.github.io/lightweight-charts/docs/api/interfaces/IChartApi#subscribecrosshairmove)

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2026-01-18  
**–í–µ—Ä—Å–∏—è lightweight-charts:** v5.1.0 –∏ —Ä–∞–Ω–µ–µ

# –ë–ê–ì #51: –ú–µ—Ç–∫–∏ price line –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

> **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ù–ò–ó–ö–ê–Ø  
> **Issue:** [#795](https://github.com/tradingview/lightweight-charts/issues/795)  
> **–í–µ—Ä—Å–∏–∏:** –í—Å–µ –≤–µ—Ä—Å–∏–∏, –≤–∫–ª—é—á–∞—è v5.x  
> **–°—Ç–∞—Ç—É—Å:** üî¥ Open  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2020

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ **–¥–≤—É—Ö —Ü–µ–Ω–æ–≤—ã—Ö –æ—Å–µ–π** (–ª–µ–≤–æ–π –∏ –ø—Ä–∞–≤–æ–π) **–º–µ—Ç–∫–∏ price line –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–π –æ—Å–∏**, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–≤—è–∑–∞–Ω–∞ —Å–µ—Ä–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ö–æ—Ç—è—Ç –≤–∏–¥–µ—Ç—å **–º–µ—Ç–∫—É —É—Ä–æ–≤–Ω—è —Ü–µ–Ω—ã –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.

### –î–µ—Ç–∞–ª–∏

1. **–°–∏–º–ø—Ç–æ–º—ã:**
   - Price line label –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–π –æ—Å–∏
   - –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–≤—É—Ö –æ—Å–µ–π –Ω–µ—Ç —Å–∏–º–º–µ—Ç—Ä–∏–∏
   - –ú–µ—Ç–∫–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∫ priceScaleId —Å–µ—Ä–∏–∏

2. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
   - –û–ø—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç–∫–∏ –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö
   - –ò–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö –≤–∏–¥–∏–º—ã—Ö –æ—Å—è—Ö

3. **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
   - –ú–µ—Ç–∫–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ priceScaleId —Å–µ—Ä–∏–∏
   - –ù–µ—Ç API –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–æ–π –æ—Å–∏

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã

```
–û–∂–∏–¥–∞–µ–º–æ–µ:                        –†–µ–∞–ª—å–Ω–æ–µ:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1.20  ‚îÇ                  ‚îÇ 1.20  ‚îÇ  ‚îÇ       ‚îÇ                  ‚îÇ 1.20  ‚îÇ
‚îÇ       ‚îÇ                  ‚îÇ       ‚îÇ  ‚îÇ       ‚îÇ                  ‚îÇ       ‚îÇ
‚îÇ 1.15 ‚îÄ‚îÇ‚îÄ‚îÄ Price Line ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ 1.15 ‚îÇ  ‚îÇ       ‚îÇ‚îÄ‚îÄ Price Line ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ 1.15 ‚îÇ
‚îÇ       ‚îÇ                  ‚îÇ       ‚îÇ  ‚îÇ       ‚îÇ                  ‚îÇ       ‚îÇ
‚îÇ 1.10  ‚îÇ                  ‚îÇ 1.10  ‚îÇ  ‚îÇ       ‚îÇ                  ‚îÇ 1.10  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  LEFT         CHART          RIGHT      LEFT         CHART          RIGHT
```

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
import { createChart } from 'lightweight-charts';

const chart = createChart(container, {
  leftPriceScale: { visible: true },
  rightPriceScale: { visible: true },
});

const series = chart.addLineSeries({
  priceScaleId: 'right', // –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–∞–≤–æ–π –æ—Å–∏
});

series.setData(data);

// Price line —Å –º–µ—Ç–∫–æ–π
const priceLine = series.createPriceLine({
  price: 1.15,
  title: 'Support',
  axisLabelVisible: true, // –ú–µ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–∞–≤–æ–π –æ—Å–∏!
});

// ‚ùå –ù–µ—Ç —Å–ø–æ—Å–æ–±–∞ –ø–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç–∫—É –Ω–∞ –ª–µ–≤–æ–π –æ—Å–∏
```

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ—Ä–∏—è –Ω–∞ –¥—Ä—É–≥–æ–π –æ—Å–∏ (‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ)

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5) - –†–∞–±–æ—Ç–∞—é—â–∏–π workaround

```typescript
import { createChart, IChartApi, ISeriesApi, LineStyle } from 'lightweight-charts';

interface DualAxisPriceLineOptions {
  price: number;
  title?: string;
  color?: string;
  lineWidth?: number;
  lineStyle?: LineStyle;
}

/**
 * –°–æ–∑–¥–∞—ë—Ç price line —Å –º–µ—Ç–∫–∞–º–∏ –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö
 */
function createDualAxisPriceLine(
  chart: IChartApi,
  mainSeries: ISeriesApi<any>,
  options: DualAxisPriceLineOptions
): { main: ReturnType<typeof mainSeries.createPriceLine>; mirror: ISeriesApi<'Line'> } {
  const { price, title = '', color = 'red', lineWidth = 1, lineStyle = LineStyle.Solid } = options;
  
  // –ü–æ–ª—É—á–∞–µ–º ID –æ—Å–Ω–æ–≤–Ω–æ–π –æ—Å–∏
  const mainScaleId = mainSeries.options().priceScaleId || 'right';
  const mirrorScaleId = mainScaleId === 'right' ? 'left' : 'right';
  
  // –°–æ–∑–¥–∞—ë–º price line –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–∏–∏
  const mainPriceLine = mainSeries.createPriceLine({
    price,
    title,
    color,
    lineWidth,
    lineStyle,
    axisLabelVisible: true,
  });
  
  // –°–æ–∑–¥–∞—ë–º –Ω–µ–≤–∏–¥–∏–º—É—é —Å–µ—Ä–∏—é –Ω–∞ –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ –¥–ª—è –º–µ—Ç–∫–∏
  const data = mainSeries.data();
  const mirrorSeries = chart.addLineSeries({
    priceScaleId: mirrorScaleId,
    visible: false, // –õ–∏–Ω–∏—è –Ω–µ –≤–∏–¥–Ω–∞
    lastValueVisible: false,
    priceLineVisible: false,
    crosshairMarkerVisible: false,
  });
  
  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–µ
  if (data.length >= 2) {
    mirrorSeries.setData([
      { time: data[0].time, value: price },
      { time: data[data.length - 1].time, value: price },
    ]);
  }
  
  // –°–æ–∑–¥–∞—ë–º price line –Ω–∞ –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π —Å–µ—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∫–∏)
  mirrorSeries.createPriceLine({
    price,
    title,
    color,
    lineWidth: 0, // –õ–∏–Ω–∏—è –Ω–µ —Ä–∏—Å—É–µ—Ç—Å—è (—É–∂–µ –µ—Å—Ç—å –Ω–∞ main)
    lineStyle: LineStyle.Solid,
    axisLabelVisible: true,
  });
  
  return { main: mainPriceLine, mirror: mirrorSeries };
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const chart = createChart(container, {
  leftPriceScale: { visible: true },
  rightPriceScale: { visible: true },
});

const mainSeries = chart.addCandlestickSeries({
  priceScaleId: 'right',
});

mainSeries.setData(candleData);

// –°–æ–∑–¥–∞—ë–º price line —Å –º–µ—Ç–∫–∞–º–∏ –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö
const dualPriceLine = createDualAxisPriceLine(chart, mainSeries, {
  price: 100,
  title: 'Support',
  color: '#2962FF',
});
```

**–ü–ª—é—Å—ã:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º API
- –ú–µ—Ç–∫–∏ –Ω–∞ –æ–±–µ–∏—Ö –æ—Å—è—Ö
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ç–∏–ª–µ–º

**–ú–∏–Ω—É—Å—ã:**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ—Ä–∏—è –≤ –ø–∞–º—è—Ç–∏
- –ù—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

---

### –†–µ—à–µ–Ω–∏–µ 2: Custom primitive —Å –¥–≤–æ–π–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å

```typescript
import { 
  createChart, 
  IChartApi,
  ISeriesPrimitive,
  SeriesAttachedParameter,
  PriceToCoordinateConverter,
  Time,
} from 'lightweight-charts';

interface DualLabelPriceLineOptions {
  price: number;
  title?: string;
  color?: string;
  lineWidth?: number;
  leftLabelBgColor?: string;
  rightLabelBgColor?: string;
  textColor?: string;
}

class DualLabelPriceLine implements ISeriesPrimitive<Time> {
  private _options: Required<DualLabelPriceLineOptions>;
  private _chart: IChartApi | null = null;
  private _series: SeriesAttachedParameter<Time> | null = null;
  
  constructor(options: DualLabelPriceLineOptions) {
    this._options = {
      price: options.price,
      title: options.title ?? '',
      color: options.color ?? '#FF0000',
      lineWidth: options.lineWidth ?? 1,
      leftLabelBgColor: options.leftLabelBgColor ?? '#2962FF',
      rightLabelBgColor: options.rightLabelBgColor ?? '#2962FF',
      textColor: options.textColor ?? '#FFFFFF',
    };
  }
  
  attached(param: SeriesAttachedParameter<Time>): void {
    this._series = param;
    this._chart = param.chart;
  }
  
  detached(): void {
    this._series = null;
    this._chart = null;
  }
  
  updateAllViews(): void {
    this._series?.requestUpdate();
  }
  
  priceAxisViews() {
    const views = [];
    const { price, title, leftLabelBgColor, rightLabelBgColor, textColor } = this._options;
    const formattedPrice = price.toFixed(2);
    const text = title ? `${title}: ${formattedPrice}` : formattedPrice;
    
    // –ú–µ—Ç–∫–∞ –¥–ª—è –ª–µ–≤–æ–π –æ—Å–∏
    views.push({
      coordinate: () => this._series?.priceToCoordinate(price) ?? 0,
      text: () => text,
      textColor: () => textColor,
      backColor: () => leftLabelBgColor,
      visible: () => true,
    });
    
    return views;
  }
  
  paneViews() {
    return [{
      renderer: () => ({
        draw: (target: any) => {
          const ctx = target.context;
          const { price, color, lineWidth } = this._options;
          
          const y = this._series?.priceToCoordinate(price);
          if (y === null || y === undefined) return;
          
          const width = target.mediaSize.width;
          
          ctx.save();
          ctx.strokeStyle = color;
          ctx.lineWidth = lineWidth;
          ctx.setLineDash([5, 5]);
          
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(width, y);
          ctx.stroke();
          
          ctx.restore();
        },
      }),
    }];
  }
  
  setPrice(price: number): void {
    this._options.price = price;
    this.updateAllViews();
  }
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const chart = createChart(container, {
  leftPriceScale: { visible: true },
  rightPriceScale: { visible: true },
});

const series = chart.addLineSeries();
series.setData(data);

const dualPrimitive = new DualLabelPriceLine({
  price: 100,
  title: 'Support',
  color: '#2962FF',
});

series.attachPrimitive(dualPrimitive);
```

**–ü–ª—é—Å—ã:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º
- –ï–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –æ–±–µ–∏—Ö –º–µ—Ç–æ–∫
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–µ—Ä–∏–π

**–ú–∏–Ω—É—Å—ã:**
- –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è Primitives API

---

### –†–µ—à–µ–Ω–∏–µ 3: HTML overlay –¥–ª—è –º–µ—Ç–æ–∫

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê (3/5) - –ü—Ä–æ—Å—Ç–æ–π workaround

```typescript
import { createChart, IChartApi, ISeriesApi } from 'lightweight-charts';

interface OverlayLabel {
  element: HTMLElement;
  price: number;
  side: 'left' | 'right';
}

class DualAxisLabelManager {
  private _chart: IChartApi;
  private _container: HTMLElement;
  private _labels: OverlayLabel[] = [];
  private _series: ISeriesApi<any>;
  
  constructor(chart: IChartApi, container: HTMLElement, series: ISeriesApi<any>) {
    this._chart = chart;
    this._container = container;
    this._series = series;
    
    // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
    this._chart.subscribeCrosshairMove(() => this._updatePositions());
    this._chart.timeScale().subscribeVisibleLogicalRangeChange(() => this._updatePositions());
  }
  
  addPriceLine(price: number, title: string, color: string): void {
    // –°–æ–∑–¥–∞—ë–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π price line –Ω–∞ —Å–µ—Ä–∏–∏
    this._series.createPriceLine({
      price,
      title,
      color,
      axisLabelVisible: true,
    });
    
    // –°–æ–∑–¥–∞—ë–º HTML –º–µ—Ç–∫—É –¥–ª—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –æ—Å–∏
    const seriesScaleId = this._series.options().priceScaleId || 'right';
    const oppositeSide = seriesScaleId === 'right' ? 'left' : 'right';
    
    const label = this._createLabel(price, title, color, oppositeSide);
    this._labels.push(label);
    this._updatePositions();
  }
  
  private _createLabel(
    price: number, 
    title: string, 
    color: string, 
    side: 'left' | 'right'
  ): OverlayLabel {
    const element = document.createElement('div');
    element.style.cssText = `
      position: absolute;
      padding: 2px 6px;
      background: ${color};
      color: white;
      font-size: 11px;
      font-family: sans-serif;
      border-radius: 2px;
      white-space: nowrap;
      pointer-events: none;
      z-index: 10;
    `;
    element.textContent = `${title}: ${price.toFixed(2)}`;
    
    this._container.appendChild(element);
    
    return { element, price, side };
  }
  
  private _updatePositions(): void {
    for (const label of this._labels) {
      const y = this._series.priceToCoordinate(label.price);
      
      if (y === null) {
        label.element.style.display = 'none';
        continue;
      }
      
      label.element.style.display = 'block';
      label.element.style.top = `${y - 10}px`;
      
      if (label.side === 'left') {
        label.element.style.left = '0px';
        label.element.style.right = 'auto';
      } else {
        label.element.style.right = '0px';
        label.element.style.left = 'auto';
      }
    }
  }
  
  destroy(): void {
    for (const label of this._labels) {
      label.element.remove();
    }
    this._labels = [];
  }
}

// ==================== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ====================

const container = document.getElementById('chart')!;
container.style.position = 'relative';

const chart = createChart(container, {
  leftPriceScale: { visible: true },
  rightPriceScale: { visible: true },
});

const series = chart.addLineSeries({ priceScaleId: 'right' });
series.setData(data);

const labelManager = new DualAxisLabelManager(chart, container, series);
labelManager.addPriceLine(100, 'Support', '#2962FF');
```

**–ü–ª—é—Å—ã:**
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ç–∏–ª–µ–º –º–µ—Ç–∫–∏
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ API

**–ú–∏–Ω—É—Å—ã:**
- HTML —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–≤–µ—Ä—Ö canvas
- –ù—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–†–µ—à–µ–Ω–∏–µ 1** (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ—Ä–∏—è):

```typescript
// –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä
function addDualAxisPriceLine(
  chart: IChartApi,
  mainSeries: ISeriesApi<any>,
  price: number,
  title: string
): void {
  const mainScaleId = mainSeries.options().priceScaleId || 'right';
  const mirrorScaleId = mainScaleId === 'right' ? 'left' : 'right';
  
  // Price line –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–∏–∏
  mainSeries.createPriceLine({ price, title, axisLabelVisible: true });
  
  // –ù–µ–≤–∏–¥–∏–º–∞—è —Å–µ—Ä–∏—è –Ω–∞ –¥—Ä—É–≥–æ–π –æ—Å–∏
  const data = mainSeries.data();
  const mirrorSeries = chart.addLineSeries({
    priceScaleId: mirrorScaleId,
    visible: false,
  });
  
  mirrorSeries.setData([
    { time: data[0].time, value: price },
    { time: data[data.length - 1].time, value: price },
  ]);
  
  mirrorSeries.createPriceLine({ price, title, lineWidth: 0, axisLabelVisible: true });
}
```

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ì–∏–±–∫–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|----------|-------------------|----------|--------------|
| **#1 –î–æ–ø. —Å–µ—Ä–∏—è** | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ |
| **#2 Custom primitive** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –°–ª–æ–∂–Ω—ã–µ –∫–µ–π—Å—ã |
| **#3 HTML overlay** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø |

## üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏

- [GitHub Issue #795](https://github.com/tradingview/lightweight-charts/issues/795) - Price line labels on both axes
- [Price Lines Documentation](https://tradingview.github.io/lightweight-charts/docs/api/interfaces/PriceLineOptions)
- [Custom Primitives](https://tradingview.github.io/lightweight-charts/tutorials/custom_series/price-axis-view)

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2026-01-18  
**–í–µ—Ä—Å–∏—è lightweight-charts:** v5.1.0 –∏ —Ä–∞–Ω–µ–µ
